{extend name="extra@themes/mincss/layout-contest/contest-layout" /}
{block name='titlepart'}{$lang['status']} - {$lang['justoj']}{/block}
{block name='body'}
<div class="container">
	<form action="/contest/status" method="get">
		<div style="visibility: hidden;"><input type="text" name="id" value="{$contest->contest_id}"></div>
		<p>
			<span>{$lang.run_id}：</span><input class="" type="text" name="run_id" value="{$run_id}">&nbsp;&nbsp;
			<span>{$lang.username}：</span><input class="" type="text" name="username" value="{$username}">&nbsp;&nbsp;
			<select name="problem_id" value="{$problem_id}">
				<option value="" {if $result==""}selected{/if}>{$lang.all_problem}</option>
				{volist name='contest_problems' id='contest_problem'}
				<option value="{$contest_problem->num}"{if '' != $problem_id && $problem_id == $contest_problem->num} selected{/if}>{$alphabet[$contest_problem->num]}:{$contest_problem->problem->title}</option>
				{/volist}
			</select>&nbsp;&nbsp;

			<select name="result">
				<option value="" {if $result==""}selected{/if}>{$lang.all_result}</option>
				<option value="4" {if $result=="4"}selected{/if}>{$lang.result_code_ac}</option>
				<option value="0" {if $result=="0"}selected{/if}>{$lang.result_code_pending}</option>
				<option value="1" {if $result=="1"}selected{/if}>{$lang.result_code_rejuding}</option>
				<option value="2" {if $result=="2"}selected{/if}>{$lang.result_code_compiling}</option>
				<option value="3" {if $result=="3"}selected{/if}>{$lang.result_code_running}</option>
				<option value="5" {if $result=="5"}selected{/if}>{$lang.result_code_pe}</option>
				<option value="6" {if $result=="6"}selected{/if}>{$lang.result_code_wa}</option>
				<option value="7" {if $result=="7"}selected{/if}>{$lang.result_code_tle}</option>
				<option value="8" {if $result=="8"}selected{/if}>{$lang.result_code_mle}</option>
				<option value="9" {if $result=="9"}selected{/if}>{$lang.result_code_ole}</option>
				<option value="10" {if $result=="10"}selected{/if}>{$lang.result_code_re}</option>
				<option value="11" {if $result=="11"}selected{/if}>{$lang.result_code_ce}</option>
			</select>
			&nbsp;&nbsp;
			<select name="language">
				<option value="" {if $language==""}selected{/if}>{$lang.all_language}</option>
				{volist name='allowed_langs' id='allowed_lang'}
				<option value="{$allowed_lang.id}" {if $language != '' && $language == $allowed_lang.id}selected{/if}>{$allowed_lang.name}</option>
				{/volist}
			</select>
			&nbsp;&nbsp;
			<button type="submit">{$lang.submit}</button>
		</p>
	</form>
	<br>
	<hr>
	<table class="table">
		<thead>
		<tr>
			<th width="5%">{$lang.run_id}</th>
			<th width="10%">{$lang.username}</th>
			<th width="5%">{$lang.problem}</th>
			<th width="15%">{$lang.result}</th>
			<th width="10%">{$lang.memory}</th>
			<th width="10%">{$lang.exe_time}</th>
			<th width="10%">{$lang.language}</th>
			<th width="10%">{$lang.code_length}</th>
			<th width="20%">{$lang.submit_time}</th>
		</tr>
		</thead>
		<tbody>
		{volist name='solutions' id='solution'}
		<?php
		$solution->fk();
		$solution->result_text = $lang[$solution->result_code];
		?>
		<tr>
			<td width="10%">{$solution->solution_id}</td>
			<td width="10%"><a href="/user/Info?user={$solution->user_id}">{$solution->user_id}</a></td>

			<td width="10%"><a href="/contest/problem?id={$contest->contest_id}&pid={$problem_id_true_to_fake[$solution->problem_id]}">{$alphabet[$problem_id_true_to_fake[$solution->problem_id]]}</a></td>
			{if $solution->result_code == 'result_code_ce'}
			<td width="10%"><a href="/status/ceinfo?id={$solution->solution_id}" target="_blank">{$solution->result_text}</a></td>
			{else}
			<td width="10%" style="color: {$solution_result_color[$solution->result_code]}">{$solution->result_text} {if $solution->sim != null}
				<a href="/sim?id={$solution->sim->s_id}" target="_blank">{$solution->sim->sim}</a> {/if} </td>
			{/if}
			<td width="10%">{$solution->memory} B</td>
			<td width="10%">{$solution->time} ms</td>
			<td width="10%">
				{if $is_administrator || ($loginuser && $solution->user_id == $loginuser->user_id)}
				<a href="javascript:;" onclick="show_solution({$solution->solution_id})">{$solution->language_text}</a>
				{else}
				{$solution->language_text}
				{/if}
			</td>
			<td width="10%">{$solution->code_length}</td>
			<td width="20%">{$solution->in_date}</td>
		</tr>
		{/volist}
		</tbody>
	</table>
	{$solutions->render()}
</div>
{/block}