{extend name="extra@themes/mincss/layout/user" /}
{block name='titlepart'}{$title_val} - {$lang['justoj']}{/block}

{block name="body"}
<?php
$code_arr = array(
'contest_code_running' => 'green',
'contest_code_ended' => 'red',
'contest_code_pending' => 'blue'
);
?>
<div class="container">
	<form class="form-horizontal" action="{$target}" method="get">
		<p>
			<span class="addon">{$lang.keyword}: {$lang.title}</span><input class="smooth" style="border-radius: 0px" type="text" name="keyword" value="{$keyword}">
			<button class="btn btn-sm"> <span class="glyphicon glyphicon-search"></span> {$lang.search}</button>
		</p>
	</form>

	<table class="table table-hover">
		<thead>
		<tr>
			<th width="5%">ID</th>
			<th width="40%">{$lang.title}</th>
			<th width="35%">{$lang.status}</th>
			<th width="20%">{$lang.administrator}</th>
		</tr>
		</thead>
		<tbody>
		{volist name='contests' id='contest'}
		<?php $contest->fk(); ?>
		<tr>
			<td>{$contest->contest_id}</td>
			<td><a href="/contest?id={$contest->contest_id}" style="text-decoration: none">
				{if $contest->private == 1}
				<span class="glyphicon glyphicon-lock text-danger"></span>&nbsp;
				{/if}
				{$contest->title}</a></td>
			<td>
				<span style="color: {$code_arr[$contest->status_code]}">{$lang[$contest->status_code]}
					{if $contest->status_code == 'contest_code_pending'}
					@ {$contest->start_time}
					{/if}

					{if $contest->status_code == 'contest_code_running'}
					{$contest->start_time} - {$contest->end_time}
					{/if}

					{if $contest->status_code == 'contest_code_ended'}
					@ {$contest->end_time}
					{/if}
				</span>
			</td>
			<td>
				{$contest->manager_id}({$contest->manager->nick})
			</td>
		</tr>
		{/volist}
		</tbody>
	</table>
	{$contests->render()}
</div>
{/block}
