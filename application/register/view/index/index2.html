{extend name="extra@layout/user" /}
{block name='titlepart'}{$lang['register']} - {$lang['justoj']}{/block}
{block name="navpart"}{/block}

{block name="body"}
<div class="container" style="margin-top: 80px;width:400px">
    <ul class="nav nav-tabs">
        <li>
            <a href="/login">
                {$lang.login}
            </a>
        </li>
        <li class="active">
            <a href="javascript:;">{$lang.register}</a>
        </li>
    </ul>
    <br>
	<form class="form-horizontal" role="form" method="post">
		<div class="form-group">
			<label for="username" class="col-sm-4 control-label">{$lang.username}</label>
			<div class="col-sm-8">
				<input type="text" class="form-control" id="username" name="username" placeholder="{$lang.please_input_username}">
			</div>
		</div>
		<div class="form-group">
			<label for="password" class="col-sm-4 control-label">{$lang.password}</label>
			<div class="col-sm-8">
				<input type="password" class="form-control" id="password" name="password" placeholder="{$lang.please_input_password}">
			</div>
		</div>
		<div class="form-group">
			<label for="password-again" class="col-sm-4 control-label">{$lang.password_again}</label>
			<div class="col-sm-8">
				<input type="password" class="form-control" id="password-again" name="password_again" placeholder="{$lang.please_input_password_again}">
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-offset-4 col-sm-8">
				<button type="button" onclick="register()" class="btn btn-success">{$lang.register}</button>
                <!--&nbsp;&nbsp;&nbsp;&nbsp;<a href="/login">{$lang.goto_login}</a>-->
            </div>
		</div>
	</form>
</div>

<script type="text/javascript">
function register(){
    var data = {
        'username': $('#username').val(),
		'password': $('#password').val(),
		'password_again': $('#password-again').val()
	};
    console.log(data);
    $.post('/api/User/register',data,function(d){
        console.log(d);
        if ('success' == d.status) {
            layer.alert(d.msg, {icon: 6},function(){
                location.href = '/login';
			});
		}else{
            layer.alert(d.msg, {icon: 2});
        }
	},'json');
}
</script>

{/block}
